function alertbox(){var e=$("#email_cliente_b2b").val();return""!=!$("#email_cliente_b2b").val()||(/^(\s*[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z+-])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9}\s*)$/.test(e)?void 0:($("#email-alternative").find(".alert-message").hasClass("alert-message")||($("#email-alternative").addClass("alert-form"),$("#email-alternative").addClass("alert-danger-form"),$("#email-alternative").prepend("<span class='alert-message'>Inserisci un indirizzo email valido:</span>")),!1))}function checkFields(r){var s=!0;$(".req").each(function(){var e={};if($(this).is(":visible")?e.visible=!0:e.visible=!1,$(this).find("input").length||$(this).find("textarea").length){var i=$(this).find("input"),t=$(this).find("textarea");$(i).is(":disabled")&&(e.disabled=!0),0<=$(this).attr("class").indexOf("email")&&(e.type="email"),$(this).find("textarea").length&&(""==$(t).val()?e.message="Compila questo campo:":e.compiled=!0),"altriServizi"==$(this).attr("id")?$(i).is(":checked")?e.compiled=!0:e.type="altriServizi":($(i).is(":radio")&&($(i).is(":checked")?e.compiled=!0:e.message="Seleziona una di queste opzioni:"),$(i).is(":checkbox")&&($(i).is(":checked")?e.compiled=!0:e.message="Seleziona questa casella se intendi procedere:"),$(i).is(":text")&&(""==$(i).val()?e.message="Compila questo campo:":e.compiled=!0),"email"!=e.type||1!=e.compiled||/^(\s*[0-9a-zA-Z]([-.\w]*[0-9a-zA-Z+-])*@([0-9a-zA-Z][-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9}\s*)$/.test($(i).val())||(e.message="Inserisci un indirizzo email valido:",e.wrongEmail=!0))}else $(this).find("select").is(":disabled")&&(e.disabled=!0),$(this).find("select")&&(e.type="select"),0==$(this).find("select").val()||""==$(this).find("select").val()?e.message="Seleziona un elemento nell'elenco:":e.compiled=!0;if($(this).closest("div[class*='row']").hasClass("alert-form")?e.alert=!0:e.alert=!1,e.visible&&(!e.compiled||e.compiled&&e.wrongEmail)&&!e.disabled)s&&(r.preventDefault(),$("html, body").animate({scrollTop:$(this).closest("div[class*='row']").offset().top-120},300),s=!1),"altriServizi"===e.type?$("#noSelection").removeClass("hidden"):e.alert||($(this).closest("div[class*='row']").addClass("alert-form"),$(this).closest("div[class*='row']").addClass("alert-danger-form"),$(this).closest("div[class*='row']").prepend("<span class='alert-message'>"+e.message+"</span>"));else if(e.visible&&"select"==e.type&&!e.disabled&&"atti_camerali_ordine_datiProdotto_dataStipulazioneContratto"==$(this).attr("id")){var a=$("#atti_camerali_ordine_datiProdotto_dataStipulazioneContratto_day"),o=$("#atti_camerali_ordine_datiProdotto_dataStipulazioneContratto_month"),n=$("#atti_camerali_ordine_datiProdotto_dataStipulazioneContratto_year");""!=a.val()&&""!=o.val()&&""!=n.val()||(r.preventDefault(),$("html, body").animate({scrollTop:$(this).closest("div[class*='row']").offset().top},300))}})}function removeAlerts(e){$(e).find("div[class*='alert-form']").length?$(e).find("div[class*='alert-form']").removeClass("alert-form"):$(e).closest("div[class*='alert-form']").removeClass("alert-form"),$(e).find("div[class*='alert-danger-form']").length?$(e).find("div[class*='alert-danger-form']").removeClass("alert-danger-form"):$(e).closest("div[class*='alert-danger-form']").removeClass("alert-danger-form"),$(e).find("div[class*='row']").find(".alert-message").length?$(e).find("div[class*='row']").find(".alert-message").remove():$(e).closest("div[class*='row']").find(".alert-message").remove()}!function(f){"use strict";var $=window.console||function(){},o={defaults:{debug:!1,RODom:!1,patternLibrary:{phone:/([\+][0-9]{1,3}([ \.\-])?)?([\(][0-9]{1,6}[\)])?([0-9A-Za-z \.\-]{1,32})(([A-Za-z \:]{1,11})?[0-9]{1,4}?)/,email:/((([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?/,url:/(https?|ftp):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?/,number:/-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?/,dateISO:/\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,alpha:/[a-zA-Z]+/,alphaNumeric:/\w+/,integer:/-?\d+/},classPrefix:"h5-",errorClass:"ui-state-error",validClass:"ui-state-valid",activeClass:"active",requiredClass:"required",requiredAttribute:"required",patternAttribute:"pattern",errorAttribute:"data-h5-errorid",customEvents:{validate:!0},kbSelectors:":input:not(:button):not(:disabled):not(.novalidate)",focusout:!0,focusin:!1,change:!0,keyup:!1,activeKeyup:!0,mSelectors:'[type="range"]:not(:disabled):not(.novalidate), :radio:not(:disabled):not(.novalidate), :checkbox:not(:disabled):not(.novalidate), select:not(:disabled):not(.novalidate), option:not(:disabled):not(.novalidate)',click:!0,requiredVar:"h5-required",patternVar:"h5-pattern",stripMarkup:!0,submit:!0,focusFirstInvalidElementOnSubmit:!0,validateOnSubmit:!0,invalidCallback:function(){},validCallback:function(){},allValidSelectors:":input:visible:not(:button):not(:disabled):not(.novalidate)",markInvalid:function(e){var i=f(e.element),t=f(e.errorID);return i.addClass(e.errorClass).removeClass(e.validClass),i.addClass(e.settings.activeClass),t.length&&(i.attr("title")&&t.text(i.attr("title")),t.show()),i.data("valid",!1),e.settings.invalidCallback.call(e.element,e.validity),i},markValid:function(e){var i=f(e.element),t=f(e.errorID);return i.addClass(e.validClass).removeClass(e.errorClass),t.length&&t.hide(),i.data("valid",!0),e.settings.validCallback.call(e.element,e.validity),i},unmark:function(e){var i=f(e.element);return i.removeClass(e.errorClass).removeClass(e.validClass),i.form.find("#"+e.element.id).removeClass(e.errorClass).removeClass(e.validClass),i}}}.defaults,t=o.patternLibrary,n={isValid:function(e,i){var t=f(this);return!1!==(i=e&&i||{}).revalidate&&t.trigger("validate"),t.data("valid")},allValid:function(e,i){function t(e,i){i.e=e,o.push(i)}var a=!0,o=[],n=f(this),r=[],s=f.extend({},e,i);return i=i||{},n.trigger("formValidate",{settings:f.extend(!0,{},s)}),n.undelegate(s.allValidSelectors,".allValid",t),n.delegate(s.allValidSelectors,"validated.allValid",t),n.find(s.allValidSelectors).filter(function(e){var i;if("INPUT"===this.tagName&&"radio"===this.type){if(i=this.name,!0===r[i])return!1;r[i]=!0}return!0}).each(function(){var e=f(this);a=e.h5Validate("isValid",i)&&a}),n.trigger("formValidated",{valid:a,elements:o}),a},validate:function(e){var i,t,a=f(this),o=!!a.filter("[pattern]")[0]&&a.attr("pattern"),n=new RegExp("^(?:"+o+")$"),r=null,s=a.is("[type=checkbox]")?a.is(":checked"):a.is("[type=radio]")?0<(r=a.parents("form").find('input[name="'+a.attr("name")+'"]')).filter(":checked").length:a.val(),d=e.errorClass,l=e.validClass,c=a.attr(e.errorAttribute)||!1,u=!!c&&"#"+c.replace(/(:|\.|\[|\])/g,"\\$1"),p=!1,m=(t={element:this,valid:!0},f.extend({customError:t.customError||!1,patternMismatch:t.patternMismatch||!1,rangeOverflow:t.rangeOverflow||!1,rangeUnderflow:t.rangeUnderflow||!1,stepMismatch:t.stepMismatch||!1,tooLong:t.tooLong||!1,typeMismatch:t.typeMismatch||!1,valid:t.valid||!0,valueMissing:t.valueMissing||!1},t)),v=f("<input required>");p=v.filter("[required]")&&v.filter("[required]").length?a.filter("[required]").length&&"false"!==a.attr("required"):void 0!==a.attr("required"),e.debug&&window.console&&($.log('Validate called on "'+s+'" with regex "'+n+'". Required: '+p),$.log("Regex test: "+n.test(s)+", Pattern: "+o)),i=parseInt(a.attr("maxlength"),10),!isNaN(i)&&s.length>i&&(m.valid=!1,m.tooLong=!0),p&&!s?(m.valid=!1,m.valueMissing=!0):o&&!n.test(s)&&s?(m.valid=!1,m.patternMismatch=!0):e.RODom||e.markValid({element:this,validity:m,errorClass:d,validClass:l,errorID:u,settings:e}),m.valid||e.RODom||e.markInvalid({element:this,validity:m,errorClass:d,validClass:l,errorID:u,settings:e}),a.trigger("validated",m),null!==r&&!0!==e.alreadyCheckingRelatedRadioButtons&&(e.alreadyCheckingRelatedRadioButtons=!0,r.not(a).trigger("validate"),e.alreadyCheckingRelatedRadioButtons=!1)},delegateEvents:function(e,i,t,a){function o(){a.validate.call(this,a)}var n={},r=0;for(r in f.each(i,function(e,i){i&&(n[e]=e)}),n)n.hasOwnProperty(r)&&f(t).delegate(e,n[r]+".h5Validate",o);return t},bindDelegation:function(a){var e,i=f(this);return f.each(t,function(e,i){var t=i.toString();t=t.substring(1,t.length-1),f("."+a.classPrefix+e).attr("pattern",t)}),(e=i.filter("form").add(i.find("form")).add(i.parents("form"))).attr("novalidate","novalidate").submit(r),e.find("input[formnovalidate][type='submit']").click(function(){f(this).closest("form").unbind("submit",r)}),this.each(function(){var e={focusout:a.focusout,focusin:a.focusin,change:a.change,keyup:a.keyup},i={click:a.click},t={keyup:a.activeKeyup};a.delegateEvents(":input",a.customEvents,this,a),a.delegateEvents(a.kbSelectors,e,this,a),a.delegateEvents(a.mSelectors,i,this,a),a.delegateEvents(a.activeClassSelector,t,this,a),a.delegateEvents("textarea[maxlength]",{keyup:!0},this,a)})}},r=function(e){var i,t,a=d.call(this);if(!0===a.submit){if(!0!==(t=(i=f(this)).h5Validate("allValid",{revalidate:!0===a.validateOnSubmit})))if(e.preventDefault(),!0===a.focusFirstInvalidElementOnSubmit)f(a.allValidSelectors,i).filter(function(e){return!0!==f(this).h5Validate("isValid",{revalidate:!1})}).first().focus();return t}},s=[],d=function(){var e=f(this).closest("[data-h5-instanceId]");return s[e.attr("data-h5-instanceId")]};f.h5Validate={addPatterns:function(e){var i,t=o.patternLibrary;for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},validValues:function(e,i){var t,a=0,o=i.length,n="";for(a=0;a<o;a+=1)n=n?n+"|"+i[a]:i[a];t=new RegExp("^(?:"+n+")$"),f(e).data("regex",t)}},f.fn.h5Validate=function(e){var i,t,a;return"string"==typeof e&&"function"==typeof n[e]?(a=d.call(this),i=e,(t=[].slice.call(arguments,0)).shift(),t=f.merge([a],t),a[i].apply(this,t)):(a=function(e){var i=f.extend({},o,e,n),t=i.classPrefix+i.activeClass;return f.extend(i,{activeClass:t,activeClassSelector:"."+t,requiredClass:i.classPrefix+i.requiredClass,el:this})}.call(this,e),function(e){var i=s.push(e)-1;!0!==e.RODom&&f(this).attr("data-h5-instanceId",i),f(this).trigger("instance",{"data-h5-instanceId":i})}.call(this,a),n.bindDelegation.call(this,a))}}(jQuery),function(r){r.fn.logicaOpzioniProdotto=function(e,i,t){var o=this;function n(e,i){var t;if(i)for(t=0;t<i.length;t++)if(i[t]===e)return 1}return o.prefix_form="",o.valori={},o.nascondiCampi={},o.pulisciCampi={},e&&r(this).data("opzioni",e),o.opzioni=r(this).data("opzioni"),o.opzioni&&(o.prefix_form=o.opzioni.prefix_form,o.valori=o.opzioni.valori?o.opzioni.valori:{},o.checkbox=r(this),o.nascondiCampi=o.opzioni.reset?o.opzioni.reset:{},o.pulisciCampi=o.opzioni.clean?o.opzioni.clean:{}),o.reset=function(){o.nascondiCampi&&r.each(o.nascondiCampi,function(e,i){0<r("#"+i).length?(r("#"+i).addClass("hidden"),r("#"+i).find("input").prop("required",!1),r("#"+i).find("select").prop("required",!1)):r("#"+o.prefix_form+i).closest(".row").addClass("hidden")})},o.clean=function(){o.pulisciCampi&&r.each(o.pulisciCampi,function(e,i){0<r("#"+i).length?(r("#"+i).find(":checked").prop("checked",!1),r("#"+i).find("input:not(:radio):not(:checkbox)").val(""),r("#"+i).find("select").val("")):(r("#"+o.prefix_form+i).find(":checked")&&r("#"+o.prefix_form+i).children().prop("checked",!1),r("#"+o.prefix_form+i).val(""))})},o.refreshOpzioni=function(){o.clean(),o.reset(),r.each(o.valori,function(t,e){var a=e.mostra,i=e.obbligatori;r.each(a,function(e,i){o.checkbox.filter(":checked").val()===t&&(r.each(o.nascondiCampi,function(e,i){n(i,a)||(0<r("#"+i).length?(r("#"+i).find(":checked").prop("checked",!1),r("#"+i).find("input:not(:radio):not(:checkbox)").val(""),r("#"+i).find("select").val(""),r("#"+i).find("input").prop("required",!1),r("#"+i).find("select").prop("required",!1),r("#"+i).find("select[id*=omune]").not("disabled")&&(r("#"+i).find("select[id*=omune]").empty(),r("#"+i).find("select[id*=omune]").prop("required",!1),r("#"+i).find("select[id*=omune]").prop("disabled",!0))):(r("#"+o.prefix_form+i).find(":checked")&&(r("#"+o.prefix_form+i).children().prop("checked",!1),r("#"+o.prefix_form+i).children().prop("required",!1)),r("#"+o.prefix_form+i).val("")))}),0<r("#"+i).length?r("#"+i).removeClass("hidden"):r("#"+o.prefix_form+i).closest(".row").removeClass("hidden")),o.checkbox.filter("input:checkbox:not(:checked)").val()===t&&r.each(o.nascondiCampi,function(e,i){n(i,a)||(0<r("#"+i).length?r("#"+i).removeClass("hidden"):r("#"+o.prefix_form+i).closest(".row").removeClass("hidden"))})}),i&&r.each(i,function(e,i){o.checkbox.filter(":checked").val()===t&&(0<r("#"+i).length&&!r("#"+i).hasClass("hidden")?(r("#"+i).find("input").prop("required",!0),r("#"+i).find("select").prop("required",!0)):r("#"+o.prefix_form+i).children().prop("required",!0))})})},o}}(jQuery),function(l){l.fn.codiceFiscale=function(e){var o=function(){},n=function(){};e=e||{},l.isFunction(e.onValid)&&(o=e.onValid),l.isFunction(e.onInvalid)&&(n=e.onInvalid);var d=this;return l.fn.codiceFiscale.calcola=function(){var t=l.Deferred(),e=l("#"+l(d).data("paese-it")).is(":checked")?l("#"+l(d).data("paese-it")).val():l("#"+l(d).data("paese-es")).val(),i=l("#"+l(d).data("nome")).val(),a=l("#"+l(d).data("cognome")).val(),o=l("#"+l(d).data("sesso-m")).is(":checked")?l("#"+l(d).data("sesso-m")).val():l("#"+l(d).data("sesso-f")).val(),n=l("#"+l(d).data("nascita-g")).val()+"/"+l("#"+l(d).data("nascita-m")).val()+"/"+l("#"+l(d).data("nascita-a")).val(),r="italia"===e?l("#"+l(d).data("comune")).val():l("#"+l(d).data("nazione")).val(),s=e&&i&&a&&o&&l("#"+l(d).data("nascita-g")).val()&&l("#"+l(d).data("nascita-m")).val()&&l("#"+l(d).data("nascita-a")).val();return"italia"===e&&(s=s&&r),s?(l.ajax({url:Routing.generate("qm_tuttovisure_calcola_codicefiscale",{paese:e,nome:i,cognome:a,sesso:o,dataDiNascita:n,comune:r}),dataType:"json",success:function(e){l.each(e,function(e,i){t.resolveWith(d,[i])})},error:function(e){t.reject()}}),t.promise()):t.reject()},l.fn.codiceFiscale.check=function(e){for(var i=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t=["0","1","2","3","4","5","6","7","8","9"],a=[1,0,5,7,9,13,15,17,19,21,2,4,18,20,11,3,6,8,12,14,16,10,22,25,24,23],o=0,n=0;n<e.length-1;n++){var r=n+1,s=e.charAt(n);l.each(i,function(t,e){s===e&&(r%2==0?o+=t:l.each(a,function(e,i){e===t&&(o+=i)}))}),l.each(t,function(t,e){s===e&&(r%2==0?o+=t:l.each(a,function(e,i){e===t&&(o+=i)}))})}return i[o%26]},l.fn.codiceFiscale.valida=function(){var e=[];l(d).data("nascondi-se-valido")&&(e=l(d).data("nascondi-se-valido").split(";"));var i=l(d).val();if(""===l(d).val())var t=!0;else if(!i)return!1;var a=this.check(i);return(t=i.substr(15,15)===a)?(o(),""!==l(d).val()?l.each(e,function(e,i){l("#"+i).closest(".row").addClass("hidden")}):l.each(e,function(e,i){l("#"+i).closest(".row").removeClass("hidden")}),l("#"+l(d).attr("id")+"_codiceFiscaleError").addClass("hidden")):(n(),l.each(e,function(e,i){l("#"+i).closest(".row").removeClass("hidden")}),l(d).val()&&l("#"+l(d).attr("id")+"_codiceFiscaleError").removeClass("hidden")),""===l(d).val()&&l("#"+l(d).attr("id")+"_codiceFiscaleError").addClass("hidden"),t},this}}(jQuery),$(document).ready(function(){$(".calcolaCodiceFiscale").click(function(){$("[id$='_nome']").length&&$("#codicefiscale_nome").val($("[id$='_nome']").val()),$("[id$='_cognome']").length&&$("#codicefiscale_cognome").val($("[id$='_cognome']").val()),$("[id$='_day']").length&&$("#codicefiscale_DataDiNascita_day").val($("[id$='_day']").val()),$("[id$='_month']").length&&$("#codicefiscale_DataDiNascita_month").val($("[id$='_month']").val()),$("[id$='_year']").length&&$("#codicefiscale_DataDiNascita_year").val($("[id$='_year']").val()),$("[id$='_cliente_nome']").length&&$("#codicefiscale_nome").val($("[id$='cliente_nome']").val()),$("[id$='_cliente_cognome']").length&&$("#codicefiscale_cognome").val($("[id$='cliente_cognome']").val())}),$(".codicefiscale").donetyping(function(){var e=$(this).val().replace(/\s/g,"").toUpperCase();$(this).val(e),$(this).codiceFiscale.valida()}),$('input[name="codicefiscale[paese]"]').change(function(){"estero"===$(this).val()?($("#codicefiscale_Nazione").closest(".row").removeClass("hidden"),$("#codicefiscale_Comune").closest(".row").addClass("hidden"),$("#codicefiscale_Provincia").closest(".row").addClass("hidden")):($("#codicefiscale_Nazione").closest(".row").addClass("hidden"),$("#codicefiscale_Comune").closest(".row").removeClass("hidden"),$("#codicefiscale_Provincia").closest(".row").removeClass("hidden"))}),$("#calcolaCodiceFiscaleButton").on("click",function(e){var i;if(!(i=!0,$("#codicefiscale_nome").val()?$("#codicefiscale_cognome").val()?$("#codicefiscale_DataDiNascita_day").val()?$("#codicefiscale_DataDiNascita_month").val()?$("#codicefiscale_DataDiNascita_year").val()||(i=!1,$("#codicefiscale_DataDiNascita_year").focus()):(i=!1,$("#codicefiscale_DataDiNascita_month").focus()):(i=!1,$("#codicefiscale_DataDiNascita_day").focus()):(i=!1,$("#codicefiscale_cognome").focus()):(i=!1,$("#codicefiscale_nome").focus()),"italia"===$('input[name="codicefiscale[paese]"]:checked').val()?$("#codicefiscale_Comune").val()||(i=!1,$("#codicefiscale_Comune").focus()):$("#codicefiscale_Nazione").val()||(i=!1,$("#codicefiscale_Nazione").focus()),i))return e.preventDefault(),e.stopImmediatePropagation(),alert("Compilare tutti i campi"),!1;$(".codicefiscale").codiceFiscale.calcola().fail(function(){$(this).codiceFiscale.valida()}).then(function(e){$(this).val(e),$(this).find("div[class*='alert-form']").length?$(this).find("div[class*='alert-form']").removeClass("alert-form"):$(this).closest("div[class*='alert-form']").removeClass("alert-form"),$(this).find("div[class*='alert-danger-form']").length?$(this).find("div[class*='alert-danger-form']").removeClass("alert-danger-form"):$(this).closest("div[class*='alert-danger-form']").removeClass("alert-danger-form"),$(this).find("div[class*='row']").find(".alert-message").length?$(this).find("div[class*='row']").find(".alert-message").remove():$(this).closest("div[class*='row']").find(".alert-message").remove(),$(this).codiceFiscale.valida()})}),$("#codicefiscale_Provincia").change(function(){Tuttovisure.provinciaComune($(this),"#codicefiscale_Comune")}),$(".codicefiscale").codiceFiscale(),$(".codicefiscale").codiceFiscale.valida(),$("#codicefiscale_Provincia").val()&&Tuttovisure.provinciaComune($(this),"#codicefiscale_Comune")}),"undefined"==typeof Tuttovisure&&(Tuttovisure={}),Tuttovisure.ua=detect.parse(navigator.userAgent),Tuttovisure.parziali={totale:"0,00",imponibile:"0,00",anticipazioni:"0,00",iva:"0,00",importoScontoDaCodice:"0,00",codiceScontoAdvisor:!1},Tuttovisure.currentXhr=null,Tuttovisure.provinciaComune=function(i,t,a){$(t).prop("disabled",!0),$.ajax({url:Routing.generate("qm_tuttovisure_comuni_options",{provincia:$(i).val()}),dataType:"json",success:function(e){$(i).is("input:radio")&&($(this).find(":checked")?($(t).prop("disabled",!1),$(t).prop("required",!0),$(t).empty(),$(a).html(""),$(t).append($("<option>").text("Seleziona il comune").prop("value","")),$.each(e,function(e,i){$(t).append($("<option>").text(i.nome).prop("value",i.id))})):($(t).empty(),$(t).trigger("change"),$(t).prop("disabled",!0),$(t).prop("required",!1),$(a).html(""))),$(i).is("select")&&(""===$(i).val()?($(t).empty(),$(t).trigger("change"),$(t).prop("disabled",!0),$(t).prop("required",!1),$(a).html("")):($(t).prop("disabled",!1),$(t).prop("required",!0),$(t).empty(),$(a).html(""),$(t).append($("<option>").text("Seleziona il comune").prop("value","")),$.each(e,function(e,i){$(t).append($("<option>").text(i.nome).prop("value",i.id))})))},error:function(e){}})},Tuttovisure.Cliente={validaForm:function(i,t){void 0===t&&(t=!1),$("#"+i+"cliente_tipoCliente_0").prop("checked")&&Tuttovisure.Cliente.personaFisica(i,t),$("#"+i+"cliente_tipoCliente_1").prop("checked")&&Tuttovisure.Cliente.azienda(i,t),$("#"+i+"cliente_tipoCliente_2").prop("checked")&&Tuttovisure.Cliente.professionista(i,t),$("#"+i+"cliente_tipoCliente input").click(function(){$("#partitaIva").find("div[class*='col-md-7']").addClass("req"),$("#codiceFiscaleCliente").find("div[class*='col-md-7']").addClass("req");var e=$(this).val();"persona_fisica"==e&&Tuttovisure.Cliente.personaFisica(i,t),"azienda"==e&&Tuttovisure.Cliente.azienda(i,t),"professionista"==e&&Tuttovisure.Cliente.professionista(i,t)})},personaFisica:function(e,i){$("#nome").removeClass("alert-form alert-danger-form"),$("#nome").find("span[class*='alert-message']").remove(),$("#cognome").removeClass("alert-form alert-danger-form"),$("#cognome").find("span[class*='alert-message']").remove(),$("#nome").find("input:text").prop("required",!0),$("#comune").removeClass("alert-form alert-danger-form"),$("#comune").find("span[class*='alert-message']").remove(),$("#datiCliente").removeClass("hidden"),$("#datiPersona").removeClass("hidden"),$("#codiceFiscaleCliente").find("input:text").prop("required",!0),$("#codiceFiscaleCliente").find("input:text").keydown(function(e){16<=$(this).val().length&&$(this).val($(this).val().substr(0,16))}),$("#codiceFiscaleCliente").find("input:text").keyup(function(e){16<=$(this).val().length&&$(this).val($(this).val().substr(0,16))}),$("#datiAzienda").addClass("hidden"),$("#datiAzienda").find("input:text, select").prop("required",!1),$("#datiAzienda").find("input:text").val(""),$("#pIvaSettore").addClass("hidden"),$("#pIvaSettore").find("input:text, select").prop("required",!1),$("#pIvaSettore").find("input:text").val(""),$("#pIvaSettore").find("select").val(0),$("#email").find("input:text").prop("required",!0),$("#nome").closest("div").find("label").html("Nome:"),$("#nome").find("input:text").prop("required",!0),$("#cognome").closest("div").find("label").html("Cognome:"),$("#cognome").find("input:text").prop("required",!0),$("#provincia").closest("div").find("label").html("Provincia:"),$("#provincia").find("input:text, select").prop("required",!0),$("#comune").closest("div").find("label").html("Comune:"),$("#indirizzo").closest("div").find("label").html("Indirizzo:"),$("#indirizzo").find("input:text").prop("required",!0),$("#cap").closest("div").find("label").html("Cap:"),$("#cap").find("input:text").prop("required",!0),i&&($("#datiPersona").find("input:text, select").prop("required",!0),$("#recapiti").find("input:text, select").prop("required",!0)),$("#"+e+"cliente_nazione").length&&$("#"+e+"cliente_nazione").val(Tuttovisure.parziali.nomeSpedizione)},azienda:function(e,i){$("#datiCliente").removeClass("hidden"),$("#datiAzienda").removeClass("hidden"),$("#partitaIva").find("input:text").prop("required",!0),$("#datiPersona").addClass("hidden"),$("#datiPersona").find("input:text, select").prop("required",!1),$("#datiPersona").find("input:text").val(""),$("#pIvaSettore").removeClass("hidden"),$("#email").find("input:text").prop("required",!0),$("#provincia").find("div[class*='col-md-7']").addClass("req"),$("#provincia").closest("div").find("label").html("Provincia:"),$("#comune").closest("div").find("label").html("Comune:"),$("#indirizzo").find("div[class*='col-md-7']").addClass("req"),$("#indirizzo").closest("div").find("label").html("Indirizzo:"),$("#cap").find("div[class*='col-md-7']").addClass("req"),$("#cap").closest("div").find("label").html("Cap:"),i&&($("#datiAzienda").find("input:text, select").prop("required",!0),$("#recapiti").find("input:text, select").prop("required",!0)),$("#"+e+"cliente_nazione").length&&$("#"+e+"cliente_nazione").val(Tuttovisure.parziali.nomeSpedizione)},professionista:function(e,i){$("#datiCliente").removeClass("hidden"),$("#datiPersona").removeClass("hidden"),$("#codiceFiscaleCliente").removeClass("hidden"),$("#codiceFiscaleCliente").find("input:text").prop("required",!0),$("#codiceFiscaleCliente").find("input:text").keydown(function(e){16<=$(this).val().length&&$(this).val($(this).val().substr(0,16))}),$("#codiceFiscaleCliente").find("input:text").keyup(function(e){16<=$(this).val().length&&$(this).val($(this).val().substr(0,16))}),$("#datiAzienda").addClass("hidden"),$("#datiAzienda").find("input:text, select").prop("required",!1),$("#datiAzienda").find("input:text").val(""),$("#pIvaSettore").removeClass("hidden"),$("#partitaIva").find("input:text").prop("required",!0),$("#email").find("input:text").prop("required",!0),$("#nome").find("div[class*='col-md-7']").addClass("req"),$("#nome").closest("div").find("label").html("Nome:"),$("#cognome").find("div[class*='col-md-7']").addClass("req"),$("#cognome").closest("div").find("label").html("Cognome:"),$("#provincia").find("div[class*='col-md-7']").addClass("req"),$("#provincia").closest("div").find("label").html("Provincia:"),$("#comune").closest("div").find("label").html("Comune:"),$("#indirizzo").find("div[class*='col-md-7']").addClass("req"),$("#indirizzo").closest("div").find("label").html("Indirizzo:"),$("#cap").find("div[class*='col-md-7']").addClass("req"),$("#cap").closest("div").find("label").html("Cap:"),i&&($("#datiPersona").find("input:text, select").prop("required",!0),$("#pIvaSettore").find("input:text, select").prop("required",!0),$("#recapiti").find("input:text, select").prop("required",!0)),$("#"+e+"cliente_nazione").length&&$("#"+e+"cliente_nazione").val(Tuttovisure.parziali.nomeSpedizione)}},Tuttovisure.Ordine={aggiornaParziali:function(){var t=$("#prodotto-form").serialize();$.each($("#prodotto-form input[type=checkbox]").filter(function(e){return!1===$(this).prop("checked")}),function(e,i){t+="&"+$(i).attr("name")+"="}),t=t+"&prodotto="+$("#prodotto-form").data("prodotto"),Tuttovisure.currentXhr&&Tuttovisure.currentXhr.abort();var e=Routing.generate("qm_tuttovisure_prodotto_parziali_ordine");if($("#page").attr("frontendflag")){var i=JSON.parse($("#page").attr("frontendflag"));e=Routing.generate("qm_tuttovisure_prodotto_parziali_ordine_no_session",{id:i.pagamentoTardivoFlag})}Tuttovisure.currentXhr=$.ajax({type:"GET",url:e,data:t,dataType:"json",success:function(e){"function"==typeof filtraDatiParziali&&(e=filtraDatiParziali(e)),"function"==typeof filtraMessaggiUrgenza&&(e=filtraMessaggiUrgenza(e),$("#bloccoOrdineUrgenza").find("input:checkbox").prop("checked",!1)),"function"==typeof filtraSpedizioni&&(e=filtraSpedizioni(e));var t=[];$.each(e.opzioni,function(e,i){"0,00"!=i.imponibile&&t.push(i)}),parziali=Tuttovisure.parziali,parziali.totale=e.totale,parziali.imponibile=e.imponibile,parziali.imponibileUrgenza=e.imponibileUrgenza,parziali.anticipazioni=e.anticipazioni,parziali.vociAnticipazioni=e.vociAnticipazioni,parziali.iva=e.iva,parziali.opzioni=t,parziali.dati=e.datiProdotto,parziali.urgenza=e.urgenza,parziali.tempiUrgenza=e.tempiUrgenza,parziali.tempiLavorazione=e.tempiLavorazione,parziali.upselling=e.upselling,parziali.imponibileTutte=e.imponibileTutte,parziali.imponibileTutteAnticipazioni=e.imponibileTutteAnticipazioni,parziali.spedizione=e.spedizione,parziali.imponibileSpedizione=e.imponibileSpedizione,parziali.nomeSpedizione=e.nomeSpedizione,parziali.prezzoBase=e.prezzoBase,parziali.scontoTotale=e.scontoTotale,parziali.scontoPercentuale=e.scontoPercentuale,parziali.importoScontoDaCodice=e.importoScontoDaCodice,parziali.codiceScontoAdvisor=e.codiceScontoAdvisor;var i,a=$("#codiceScontoEccessoAdvisor");a.length&&parziali.codiceScontoAdvisor&&a.removeClass("hidden"),0<=navigator.userAgent.toLowerCase().indexOf("msie 8")&&(i=e,$("#riepilogo table tbody").html(""),$.each(i.opzioni,function(e,i){"sms"!=i.testo&&$("#riepilogo table tbody").append("<tr><td>"+i.testo+"</td><td>&euro; "+i.imponibile+"</td></tr>")}),i.urgenza&&$("#riepilogo table tbody").append("<tr><td>Consegna Urgente</td><td>&euro; "+i.imponibileUrgenza+"</td></tr>"),i.spedizione&&$("#riepilogo table tbody").append("<tr><td>Spedizione "+i.nomeSpedizione+"</td><td>&euro; "+i.imponibileSpedizione+"</td></tr>"),i.scontoPercentuale&&$("#riepilogo table tbody").append("<tr><td>Sconto "+i.scontoPercentuale+"%</td><td>&euro; "+i.scontoTotale+"</td></tr>"),"Object"==typeof i.opzioni.sms&&$("#riepilogo table tbody").append("<tr><td>"+i.opzioni.sms.testo+"</td><td>&euro; "+i.opzioni.sms.imponibile+"</td></tr>"),$.each(i.vociAnticipazioni,function(e,i){$("#riepilogo table tbody").append('<tr class="active"><td>'+i.testo+"</td><td>&euro; "+i.valore+"</td></tr>")}),$("#riepilogo table tbody").append('<tr class="active"><td>Totale Imponibile</td><td>&euro; '+i.imponibile+"</td></tr>"),$("#riepilogo table tbody").append('<tr class="active"><td>Iva</td><td>&euro; '+i.iva+"</td></tr>"),$("#riepilogo table tbody").append('<tr class="totale"><td>TOTALE</td><td>&euro; '+i.totale+"</td></tr>"),console.log("update")),Tuttovisure.currentXhr=null}})},bindRiepilogo:function(){rivets.formatters.getOption=function(e,t){var a;return e&&$.each(e,function(e,i){i.nome==t&&(a=i.imponibile)}),a},rivets.formatters.getNomeOption=function(e,i){var a;return e&&$.each(e,function(e,t){$.each(i,function(e,i){t.nome==i&&(a=t.nome)})}),a},rivets.formatters.getAnticipazione=function(e,t){var a;return e&&$.each(e,function(e,i){i.nome==t&&(a=i.valore)}),a},rivets.formatters.filterOption=function(e,t){var a=new Array;return e&&$.each(e,function(e,i){i.nome!==t&&a.push(i)}),a},rivets.formatters.getSingleOption=function(e,t){var a;return e&&$.each(e,function(e,i){i.nome==t&&(a=i)}),a?[a]:[]},rivets.formatters.checkDato=function(e,t,a){var o=!1;return e&&$.each(e,function(e,i){i.name==t&&i.val==a&&(o=!0)}),o},rivets.bind($("#sidebar_prodotto"),{parziali:Tuttovisure.parziali}),rivets.bind($("#ordine-urgenza"),{parziali:Tuttovisure.parziali}),rivets.bind($("#urgenzaHeader"),{parziali:Tuttovisure.parziali})},bindChange:function(e){0<$("#prodotto-form").length&&($("#conservatoria_Comune").empty(),$(".come").length||($(".myform").removeClass("hidden"),$("#campi-obbligatori-text").removeClass("hidden")),$("#"+e+"cliente_comune").empty(),$("#"+e+"cliente_provincia").val(""),$("#conservatoria").length||($("#"+e+"datiProdotto_comune").empty(),$("#"+e+"datiProdotto_provincia").val("")),$("#"+e+"datiProdotto_ricercaSu").find("input:radio").prop("checked",!1),1!=$("input[name$='flow_prodotto_step']").val()||$("#prodotto-form").find('input:radio:checked:not([id*="durata"])').length||""!==$("#prodotto-form").data("token")||""!==$("#prodotto-form").find("input:text").val()||$("#prodotto-form").find("input:checkbox:checked").length?($("table[name$='prezzoBase']").addClass("hidden"),$("table[name$='riepilogo']").removeClass("hidden")):($("table[name$='prezzoBase']").removeClass("hidden"),$("#prodotto-form input").one("change keypress",function(e){$("table[name$='riepilogo']").removeClass("hidden"),$("table[name$='prezzoBase']").addClass("hidden"),$("#urg-riepilogo").css("display","block"),$("#scegliUrgenzaStart").css("display","none")}),$("#prodotto-form select").one("change",function(){$("table[name$='riepilogo']").removeClass("hidden"),$("table[name$='prezzoBase']").addClass("hidden"),$("#urg-riepilogo").css("display","block"),$("#scegliUrgenzaStart").css("display","none")})),$("#bonifico").click(function(){$('select[id$="tipoCheckOut"]>option:eq(2)').prop("selected",!0),$("#prodotto-form").submit()}),$("#cartaDiCredito").click(function(){$("select[id$=tipoCheckOut]>option:eq(1)").prop("selected",!0),$("#prodotto-form").submit()}),$("input[id*='urgenza']").on("change",function(){Tuttovisure.Ordine.aggiornaParziali()}),$("select[id*='opzioniProdotto']").on("change",function(e){$(this).logicaOpzioniProdotto().refreshOpzioni(),void 0!==e.originalEvent&&Tuttovisure.Ordine.aggiornaParziali()}),$("input[id*='opzioniProdotto']").on("change",function(e){$(this).logicaOpzioniProdotto().refreshOpzioni(),void 0!==e.originalEvent&&Tuttovisure.Ordine.aggiornaParziali()}),$("select[id*='datiProdotto']").on("change",function(){$(this).logicaOpzioniProdotto().refreshOpzioni()}),$("input[id*='datiProdotto']").on("change",function(){$(this).logicaOpzioniProdotto().refreshOpzioni(),$(this).parents().find("span[id*='riepilogo']")&&Tuttovisure.Ordine.aggiornaParziali()}))},bindFancyBox:function(){$(".fancybox").fancybox({openEffect:"none",closeEffect:"none",autoSize:!1,beforeLoad:function(){this.width=parseInt(this.element.data("fancybox-width")),this.height=parseInt(this.element.data("fancybox-height")),$("#pdf-iframe").attr("src",this.element.data("pdf"))}})},bindConservatoria:function(e){var i=Routing.generate("qm_tuttovisure_prodotto",{slug:"catasto-tavolare",categoriaSlug:"catasto"});$("#conservatoria_Provincia").change(function(){62==$(this).val()||42==$(this).val()||45==$(this).val()?($("#conservatoriaMessage").html('Attenzione! Per la provincia selezionata vige il <a href="'+i+'" target="nuova finestra">Catasto Tavolare</a>.'),conservatoria=0,$("#findConservatoria").addClass("hidden"),$("#conservatoria_Comune").empty(),$("#conservatoria_Comune").prop("disabled",!0)):Tuttovisure.provinciaComune($(this),"#conservatoria_Comune","#conservatoriaMessage")}),$("#conservatoria_Comune").change(function(){var e=$(this).val();$.ajax({url:Routing.generate("qm_tuttovisure_conservatoria_options",{comune:e}),dataType:"json",success:function(e){$.each(e,function(e,i){"id"==e?conservatoria=i:($("#conservatoriaMessage").html('<i class="fas fa-check"></i> La conservatoria di riferimento è: <strong>'+i+"</strong>"),$("#findConservatoria").removeClass("hidden"))})},error:function(){conservatoria=(""!==$("#conservatoria_Provincia").val()?$("#conservatoriaMessage").html('Attenzione! Per il comune selezionato vige il <a href="'+i+'" target="nuova finestra">Catasto Tavolare</a>.'):$("#conservatoriaMessage").html(""),0),$("#findConservatoria").addClass("hidden")}})}),$("#findConservatoria").click(function(){$("#conservatoria_Provincia").val(0),$("#conservatoria_Provincia").trigger("change"),$("#"+e+"datiProdotto_conservatoria").val(conservatoria),$(this).addClass("hidden")})},bindSms:function(e){$("#"+e+"opzioniProdotto_sms").prop("checked")?($("#datiSmsNumero").removeClass("hidden"),$("#datiSmsNumero").find("input:text").prop("required",!0)):($("#datiSmsNumero").addClass("hidden"),$("#datiSmsNumero").find("input:text").prop("required",!1),$("#datiSmsNumero").find("input:text").val("")),$("#"+e+"opzioniProdotto_sms").click(function(){$("#"+e+"opzioniProdotto_sms").prop("checked")?($("#datiSmsNumero").removeClass("hidden"),$("#datiSmsNumero").find("input:text").prop("required",!0)):($("#datiSmsNumero").addClass("hidden"),$("#datiSmsNumero").find("input:text").prop("required",!1),$("#datiSmsNumero").find("input:text").val(""))})},bindProvinciaComune:function(e){$("#"+e+"cliente_provincia").change(function(){Tuttovisure.provinciaComune($(this),"#"+e+"cliente_comune")})},bindSpedizione:function(e){$(".spedizione_nazionale input[name*='[spedizione][spedizione_nazionale]']").change(function(){"internazionale"==$(this).val()?($(".spedizione_internazionale").closest("div[class*='row']").removeClass("hidden"),$(".spedizione_internazionale").removeClass("hidden"),$(".spedizione_internazionale").prop("required",!0),$(this).closest("div[class*='row']").removeClass("alert-form"),$(this).closest("div[class*='row']").removeClass("alert-danger-form"),$(this).closest("div[class*='row']").find(".alert-message").remove()):($(".spedizione_internazionale").prop("required",!1),$(".spedizione_internazionale").val(""),$(".spedizione_internazionale").closest("div[class*='row']").addClass("hidden"),$(".spedizione_internazionale").addClass("hidden"),$(".spedizione_internazionale").parent(".row").removeClass("alert-form alert-danger-form"),$(".spedizione_internazionale").find(".alert-message").remove()),Tuttovisure.Ordine.aggiornaParziali()}),$(".spedizione_internazionale").change(function(){Tuttovisure.Ordine.aggiornaParziali()}),"internazionale"==$(".spedizione_nazionale input[name*='[spedizione][spedizione_nazionale]']:checked").val()&&($(".spedizione_internazionale").removeClass("hidden"),$(".spedizione_internazionale").prop("required",!0))},step2:function(e){rivets.bind($("#sidebar_prodotto"),{parziali:Tuttovisure.parziali}),Tuttovisure.Cliente.validaForm(e),$("#scegliUrgenzaStart").css("display","none"),$("#consegnaUrgente .fakeInput").css("display","none")},step3:function(){$("#checkOut").removeClass("hidden")}},$(document).ready(function(){$("form").h5Validate(),prodotto=$("#prodotto-form").attr("data-prodotto").replace(new RegExp("-","g"),"_")+"_ordine_",$("#conservatoria").length?$("#conservatoria_Comune").prop("disabled",!0):$(".disabled").prop("disabled",!0),Tuttovisure.Ordine.bindChange(prodotto),Tuttovisure.Ordine.bindRiepilogo(prodotto),Tuttovisure.Ordine.bindFancyBox(),Tuttovisure.Ordine.aggiornaParziali(),Tuttovisure.Ordine.bindConservatoria(prodotto),Tuttovisure.Ordine.bindSms(prodotto),Tuttovisure.Ordine.bindProvinciaComune(prodotto),Tuttovisure.Ordine.bindSpedizione(),$("#"+prodotto+"cliente_tipoCliente").length&&Tuttovisure.Ordine.step2(prodotto),$("#"+prodotto+"tipoCheckOut").length&&Tuttovisure.Ordine.step3(prodotto),$("#modRichiesta").click(function(){var e=$("#topRichiesta").offset().top;return $("html, body").animate({scrollTop:e},0),!1}),$("#modBar").click(function(){var e=$("#topRichiesta").offset().top;return $("html, body").animate({scrollTop:e},0),!1}),$("#topInfo").click(function(){var e=$("#cosae").offset().top;return $("html, body").animate({scrollTop:parseInt(e)},0),!1}),$("#mobileSubmit").click(function(){$("button[name$='formButtonAvanti']").click()}),setInterval(function(){$(".oraUrgenza").html(moment().add(Tuttovisure.parziali.tempiUrgenza,"minute").format("H:mm"))},5e3),$("#prodotto-form").submit(function(){var e,i;Tuttovisure.ua.browser.name.toLowerCase().indexOf("safari")<0&&(e=e||(i=$(' <div class="modal fade" id="privacy" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="privacy" aria-hidden="true"> <div class="modal-dialog"> <div class="modal-content"> <div class="modal-body"> <h2><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> Caricamento in corso...</h2> </div> </div> </div> </div>'),{showPleaseWait:function(){i.modal()},hidePleaseWait:function(){i.modal("hide")}})).showPleaseWait()}),$("#tempiConsegnaAccordion").on("click",function(){$(this).next("ul").toggleClass("showDetails"),$(this).find("i").toggleClass("fa-plus-circle fa-minus-circle")});var e=document.getElementById("sidebar_prodotto"),n=document.getElementById("descrizione_prodotto").offsetHeight,r=document.getElementById("page"),s=e.offsetTop-60,d=document.getElementById("topRichiesta");function i(){if(window.innerWidth<=990&&"pagamenti"!==r.className)window.pageYOffset>=s?($(".total-mobile").addClass("sticky"),$(".sidebar .mobile").addClass("sticky")):($(".total-mobile").removeClass("sticky"),$(".sidebar .mobile").removeClass("sticky"));else if(1024<=window.innerWidth&&"pagamenti"!==r.className){var e=$("#stickyHeight").height(),i=d.offsetTop+220,t=d.offsetTop+e+n+faqHeight+101,a=$("#stickyHeight").width(),o=$("#riepilogoSticky #riepilogo").height();0===o&&(o=69),window.pageYOffset>=i&&window.pageYOffset<=t-o-50?($("#riepilogoSticky div:first-child").addClass("fixed"),$("#riepilogoSticky").addClass("fixed"),$("#mobileSubmit").css("top",o+17),$("#btnUp").css("right",(window.innerWidth-1140)/2).show(),$("#tempi-sticky").addClass("fixed").css({top:o+45,right:(window.innerWidth-a+2)/2})):($("#riepilogoSticky div:first-child").removeClass("fixed"),$("#riepilogoSticky").removeClass("fixed"),$("#tempi-sticky").removeClass("fixed").css({top:0,right:0}),$("#btnUp").hide())}}window.onscroll=function(){i()},$(window).resize(function(){i()}),$("#stickyHeight").on("blur mousedown","input,label",function(){setTimeout(i,650)}),$("#btnUp").click(function(e){var i=document.getElementById("page").offsetTop;e.preventDefault(),$("html, body").animate({scrollTop:i},"300")}),$("label.urgenza-riepilogo,.fakeInput,#urg-riepilogo").mousedown(function(e){e.preventDefault()}),$("#prodotto-form .widget > div").has('input[type="radio"]').parent().closest("div.row").addClass("radiob")}),$(document).on("click",'button[name="formButtonCompleta"]',function(e){$(document.body).hasClass("loggato")&&!$("#prodotto-form").find(".alert-form").filter(":not(:hidden)").hasClass("alert-form")&&($("#page").append('<div id="modalPay" class="modal fade in" role="dialog" tabindex="-1" aria-hidden="true" aria-labelledby=“payment”> <div class="modal-dialog"><div class="modal-content"><div class="modal-header text-center modal-title font-40-blu" style="border-bottom: 0px;">Conferma ordine</div><div class="modal-body"><strong>Inserisci una nota alla pratica</strong><input type="text" id="note_cliente_b2b" class="form-control"><div id="email-alternative"><strong>Inserire un indirizzo email alternativo</strong><div class="email req"><input type="text" id="email_cliente_b2b" class="form-control"></div></div></div><div class="modal-footer" style="margin-top: 0px;border-top: 0px;"><button type="button" class="buttonCompletaPay btn btn-primary pull-right">CONFERMA</button><button type="button" class="buttonCancella btn btn-default pull-left" data-dismiss="modal">ANNULLA</button></div></div></div></div>'),$("#modalPay").show(),$(document.body).append('<div class="modal-backdrop fade in"></div>'),e.preventDefault())}),$(document).on("click",".buttonCancella",function(){$("#modalPay").hide(),$(".modal-backdrop").remove()}),$(document).on("click",".buttonCompletaPay",function(e){var i=alertbox();if(0==i)return i;$("#modalPay").hide();var t=$("#note_cliente_b2b").val(),a=$("#email_cliente_b2b").val();$("#prodotto-form").append("<div class='hidden'><input type='hidden' name='nota-b2b' value='"+t+"' /></div>"),$("#prodotto-form").append("<div class='hidden'><input type='hidden' name='email-b2b' value='"+a+"' /></div>"),$("#prodotto-form").submit()}),$(document).on("propertychange change keyup keypress input paste","#email-alternative",function(){$("#email-alternative").find(".alert-message").hasClass("alert-message")&&($("#email-alternative").removeClass("alert-form"),$("#email-alternative").removeClass("alert-danger-form"),$("#email-alternative").find(".alert-message").remove())}),$(document).ready(function(){$("form").on("propertychange change keyup keypress input paste",function(){$(".req").each(function(){if($(this).find("input").length||$(this).find("textarea").length){var e=$(this).find("input"),i=$(this).find("textarea");"altriServizi"==$(this).attr("id")?$(this).click(function(){$(e).is(":checkbox")&&$(e).is(":checked")&&$("#noSelection").addClass("hidden")}):($(e).is(":radio")&&$(e).is(":checked")&&removeAlerts(this),$(e).is(":checkbox")&&$(e).is(":checked")&&removeAlerts(this),$(e).is(":text")&&""!==$(e).val()&&removeAlerts(this),$(i).length&&""!==$(i).val()&&removeAlerts(this))}if($(this).is("select")){$(this).val();""!=$(this).val()&&removeAlerts(this)}if("atti_camerali_ordine_datiProdotto_dataStipulazioneContratto"==$(this).attr("id")){var t=$("#atti_camerali_ordine_datiProdotto_dataStipulazioneContratto_day"),a=$("#atti_camerali_ordine_datiProdotto_dataStipulazioneContratto_month"),o=$("#atti_camerali_ordine_datiProdotto_dataStipulazioneContratto_year");""!=t.val()&&""!=a.val()&&""!=o.val()&&removeAlerts(this)}})}),$('button[name="formButtonAvanti"], button[name="formButtonCompleta"], #contatti-invia, #contatto_veloce_invia').click(function(e){checkFields(e)})});